import React, { useEffect, useState } from 'react';
import { useGetFiltroCatalogo } from '../../../hooks/useFiltros'; // Ajusta la ruta
import { Form } from 'react-bootstrap';
import Select from 'react-select';

const EstatusSelect = ({ value, onChange }) => {
    const { getFiltroCatalogo, isLoading, error } = useGetFiltroCatalogo();
    const [estatus, setEstatus] = useState([]);

    useEffect(() => {
        const fetchEstatus = async () => {
            const data = {
                Tipo: 'Estatus',
                PersonaID: localStorage.getItem("ID"), // Ajusta este valor seg√∫n sea necesario
                Modulo: 'Vehiculos',
                ModuloID: ''
            };

            const result = await getFiltroCatalogo(data);
            setEstatus(result);
        };

        fetchEstatus();
    }, [getFiltroCatalogo]);



    return (
        <Form.Group controlId="EstatusID">
            <Form.Label>Estatus</Form.Label>
            <Select 
                className="react-select"
                options={estatus.map(item =>({ 
                    value: item.Valor, 
                    label: item.Dato,
                }))}
                onChange={onChange}
                isLoading={isLoading}
                value={value}
                required
            />
            <Form.Control
                as="select"
                name="EstatusID"
                value={value}
                onChange={onChange}
                required
            >
                <option value="">Seleccione un Estatus</option>
                {estatus.map(option => (
                    <option key={option.Valor} value={option.Valor}>
                        {option.Dato}
                    </option>
                ))}
            </Form.Control>
        </Form.Group>
    );
};

export default EstatusSelect;

